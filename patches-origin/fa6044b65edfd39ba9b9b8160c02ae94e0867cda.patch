From fa6044b65edfd39ba9b9b8160c02ae94e0867cda Mon Sep 17 00:00:00 2001
From: Lu Yahan <yahan@iscas.ac.cn>
Date: Tue, 8 Aug 2023 17:20:28 +0800
Subject: [PATCH] [riscv] Fix incorrect store size

Bug: v8:14250



Change-Id: I36f4bedff6c86298bbd03c759337bb7aa616837a
Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/4757857
Reviewed-by: Ji Qiu <qiuji@iscas.ac.cn>
Commit-Queue: Yahan Lu <yahan@iscas.ac.cn>
Auto-Submit: Yahan Lu <yahan@iscas.ac.cn>
Cr-Commit-Position: refs/heads/main@{#89433}
---
 src/wasm/baseline/riscv/liftoff-assembler-riscv.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/wasm/baseline/riscv/liftoff-assembler-riscv.h b/src/wasm/baseline/riscv/liftoff-assembler-riscv.h
index 6668774c2af..5f22f66f1f3 100644
--- a/src/wasm/baseline/riscv/liftoff-assembler-riscv.h
+++ b/src/wasm/baseline/riscv/liftoff-assembler-riscv.h
@@ -2343,7 +2343,7 @@ void LiftoffAssembler::emit_set_if_nan(Register dst, FPURegister src,
     feq_d(scratch, src, src);  // rd <- !isNan(src)
   }
   not_(scratch, scratch);
-  StoreWord(scratch, MemOperand(dst));
+  Sw(scratch, MemOperand(dst));
 }
 
 void LiftoffAssembler::CallFrameSetupStub(int declared_function_index) {
-- 
2.35.1

