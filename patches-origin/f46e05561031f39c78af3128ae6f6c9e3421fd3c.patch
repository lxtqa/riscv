From f46e05561031f39c78af3128ae6f6c9e3421fd3c Mon Sep 17 00:00:00 2001
From: Junliang Yan <junyan@redhat.com>
Date: Tue, 1 Aug 2023 17:28:32 -0400
Subject: [PATCH] [ptr-cage] enable pointer cage on s390x

Change-Id: I5653a32b2796d768ba5c3823d97857c029262441
Reviewed-on: https://chromium-review.googlesource.com/c/v8/v8/+/4738085
Commit-Queue: Junliang Yan <junyan@redhat.com>
Reviewed-by: Clemens Backes <clemensb@chromium.org>
Cr-Commit-Position: refs/heads/main@{#89382}
---
 BUILD.gn | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/BUILD.gn b/BUILD.gn
index 497c592eec9..0628dc67f5b 100644
--- a/BUILD.gn
+++ b/BUILD.gn
@@ -679,8 +679,9 @@ assert(
 assert(
     !v8_enable_pointer_compression_shared_cage || v8_current_cpu == "x64" ||
         v8_current_cpu == "arm64" || v8_current_cpu == "riscv64" ||
-        v8_current_cpu == "ppc64" || v8_current_cpu == "loong64",
-    "Sharing a pointer compression cage is only supported on x64, arm64, ppc64, riscv64 and loong64")
+        v8_current_cpu == "ppc64" || v8_current_cpu == "s390x" ||
+        v8_current_cpu == "loong64",
+    "Sharing a pointer compression cage is only supported on x64, arm64, ppc64, s390x, riscv64 and loong64")
 
 assert(!v8_enable_unconditional_write_barriers || !v8_disable_write_barriers,
        "Write barriers can't be both enabled and disabled")
-- 
2.35.1

